{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "slider",
  "type": "registry:component",
  "title": "Slider",
  "description": "A slider component with label and step marks",
  "dependencies": [
    "@radix-ui/react-slider"
  ],
  "files": [
    {
      "path": "registry/ui/slider.tsx",
      "content": "import React, {\n  ComponentProps,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport * as SliderPrimitive from \"@radix-ui/react-slider\";\nimport { cn } from \"@/lib/utils\";\n\n/**\n * Shoutout to https://designengineer.lorenzodossi.com/slider for inspo\n */\nexport const Slider = ({\n  className,\n  defaultValue,\n  value,\n  min = 0,\n  max = 100,\n  step,\n  showSteps = true,\n  label,\n  ...props\n}: ComponentProps<typeof SliderPrimitive.Root> & {\n  showSteps?: boolean;\n  label: string;\n}) => {\n  const labelRef = useRef<HTMLSpanElement>(null);\n  const valueRef = useRef<HTMLSpanElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const [labelBounds, setLabelBounds] = useState({ left: 0, right: 0 });\n\n  useLayoutEffect(() => {\n    if (!labelRef.current || !valueRef.current || !containerRef.current) return;\n\n    const updateBounds = () => {\n      const containerWidth = containerRef.current?.offsetWidth || 0;\n      const labelWidth = labelRef.current?.offsetWidth || 0;\n      const valueWidth = valueRef.current?.offsetWidth || 0;\n\n      const paddingLeft = 24;\n\n      const leftExclusionPercent =\n        ((labelWidth + paddingLeft) / containerWidth) * 100;\n      const rightExclusionPercent = (valueWidth / containerWidth) * 100;\n\n      setLabelBounds({\n        left: leftExclusionPercent,\n        right: 100 - rightExclusionPercent,\n      });\n    };\n\n    updateBounds();\n    window.addEventListener(\"resize\", updateBounds);\n    return () => window.removeEventListener(\"resize\", updateBounds);\n  }, [label, value]);\n\n  let stepMarks: number[] = [];\n\n  if (showSteps && step) {\n    const marks: number[] = [];\n    const range = max - min;\n    const stepCount = Math.floor(range / step);\n\n    if (stepCount <= 10) {\n      for (let i = 1; i <= stepCount; i++) {\n        const position = (i * step) / range;\n        const positionPercent = position * 100;\n\n        // Only add mark if it's not behind the label or value\n        if (\n          positionPercent > labelBounds.left &&\n          positionPercent < labelBounds.right\n        ) {\n          marks.push(positionPercent);\n        }\n      }\n    }\n    stepMarks = marks;\n  }\n\n  const val = typeof value === \"number\" ? value : value?.[0] ?? 0;\n  const percentage = max - min === 0 ? 0 : ((val - min) / (max - min)) * 100;\n\n  return (\n    <SliderPrimitive.Root\n      data-slot=\"slider\"\n      defaultValue={defaultValue}\n      value={value}\n      min={min}\n      max={max}\n      step={step}\n      ref={containerRef}\n      className={cn(\n        \"relative flex h-12 w-full touch-none select-none items-center rounded-lg bg-card border transition-colors hover:bg-muted cursor-grab data-disabled:cursor-not-allowed data-disabled:opacity-50\",\n        \"group/slider active:cursor-grabbing overflow-hidden shrink-0\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"pointer-events-none absolute inset-0 z-10 flex items-center justify-between px-4 select-none\">\n        <span\n          ref={labelRef}\n          className=\"text-sm font-normal tracking-tight text-foreground/30 group-hover/slider:text-foreground group-data-disabled/slider:!text-foreground/30 transition-colors duration-150\"\n        >\n          {label}\n        </span>\n        <span\n          ref={valueRef}\n          className=\"min-w-8 text-right text-sm font-medium tracking-tight text-foreground group-data-disabled/slider:opacity-50\"\n        >\n          {typeof value === \"number\" ? value : value?.map((v) => v).join(\", \")}\n        </span>\n      </div>\n\n      <SliderPrimitive.Track\n        data-slot=\"slider-track\"\n        className=\"bg-muted h-full relative grow overflow-hidden rounded-lg data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5\"\n      >\n        {stepMarks.map((position) => (\n          <div\n            key={position}\n            className=\"absolute top-1/2 -translate-y-1/2 size-0.75 rounded-full bg-black/20 pointer-events-none transition-opacity duration-150 animate-in fade-in\"\n            style={{\n              left: `calc(${position}% - 11px)`,\n            }}\n          />\n        ))}\n        <SliderPrimitive.Range\n          data-slot=\"slider-range\"\n          className={cn(\n            \"bg-card absolute data-[orientation=horizontal]:h-full rounded-lg data-[orientation=vertical]:w-full transition-all duration-150 ease-out\",\n            \"after:content-[''] after:absolute after:right-2 after:top-1/2 after:-translate-y-1/2 after:h-7 after:w-0.5 after:rounded-xl after:bg-muted-foreground/20\",\n            \"after:transition-all after:duration-300 after:ease-out\",\n            \"group-hover/slider:after:bg-muted-foreground/50 group-data-disabled/slider:after:bg-muted-foreground/50\",\n            {\n              \"after:opacity-10 after:h-6\":\n                percentage > labelBounds.right || percentage < labelBounds.left,\n            }\n          )}\n        />\n      </SliderPrimitive.Track>\n      <SliderPrimitive.Thumb className=\"opacity-0 w-4 h-8\" aria-label={label} />\n    </SliderPrimitive.Root>\n  );\n};\n",
      "type": "registry:component",
      "target": "components/ui/slider.tsx"
    },
    {
      "path": "lib/utils.ts",
      "content": "import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n",
      "type": "registry:lib",
      "target": "lib/utils.ts"
    }
  ]
}
